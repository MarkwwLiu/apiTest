# Example: WebSocket API test definition
# 測試 WSS 端點的連線、發送、接收

name: "Example WebSocket API"
base_url: "wss://echo.websocket.org"

wss_endpoints:
  - name: "echo_text"
    url: "wss://echo.websocket.org"
    timeout: 10
    retry:
      max_retries: 2
      backoff: [1, 2]
    messages:
      - action: "send"
        data: "hello from api test"
      - action: "receive"
        timeout: 5
        expected: "hello from api test"
    tags: ["echo_text", "wss", "echo"]

  - name: "echo_json"
    url: "wss://echo.websocket.org"
    timeout: 10
    messages:
      - action: "send_json"
        data:
          type: "ping"
          payload: "test123"
      - action: "receive_json"
        timeout: 5
        expected:
          type: "ping"
    tags: ["echo_json", "wss", "echo", "json"]

  - name: "echo_with_wait"
    url: "wss://echo.websocket.org"
    timeout: 10
    messages:
      - action: "send"
        data: "first message"
      - action: "wait"
        timeout: 1            # 等待 1 秒
      - action: "send"
        data: "second message"
      - action: "receive"
        timeout: 5
    tags: ["echo_with_wait", "wss", "echo"]

  - name: "echo_ping_pong"
    url: "wss://echo.websocket.org"
    timeout: 10
    messages:
      - action: "ping"
        data: "keepalive"
    tags: ["echo_ping_pong", "wss", "heartbeat"]
