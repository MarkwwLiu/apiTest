# Example: Multiple API stress test definition
# This tests several endpoints simultaneously with different weights

name: "Example Multi API Test"
base_url: "https://jsonplaceholder.typicode.com"

default_headers:
  Content-Type: "application/json"
  Accept: "application/json"

test_data_file: "example_users.yaml"

stress_config:
  users: 20
  spawn_rate: 5
  run_time: "1m"

endpoints:
  - name: "list_posts"
    url: "/posts"
    method: "GET"
    expected_status: 200
    timeout: 10
    weight: 5           # Called most frequently
    tags: ["read", "posts"]

  - name: "get_single_post"
    url: "/posts/1"
    method: "GET"
    expected_status: 200
    timeout: 10
    weight: 3
    tags: ["read", "posts"]

  - name: "create_post"
    url: "/posts"
    method: "POST"
    expected_status: 201
    timeout: 15
    weight: 2
    body:
      title: "stress test post"
      body: "This is a stress test"
      userId: 1
    tags: ["write", "posts"]

  - name: "get_comments"
    url: "/comments"
    method: "GET"
    query_params:
      postId: 1
    expected_status: 200
    timeout: 10
    weight: 2
    tags: ["read", "comments"]

  - name: "get_users"
    url: "/users"
    method: "GET"
    expected_status: 200
    timeout: 10
    weight: 1
    tags: ["read", "users"]
